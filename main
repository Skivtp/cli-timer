import time
import platform
import os

mode_names = {
        '1': 'study',
        '2': 'rest'
    }

print("hello")

def mode_selection():
    mode = input('choose mode (1 - study, 2 - rest): ')
    modelist = ['1', '2']
    while mode not in modelist:
        print("no such mode")
        mode = input('choose mode (1 - study, 2 - rest): ')
    return mode
mode = mode_selection()  

print(f'mode {mode_names[mode]} selected')

while True:
    mintues = input("Enter minutes: ")
    try:
        mintues = int(mintues)
        if mintues <= 0:
            print("not a positive number")
        else:
            break
    except ValueError:
        print("not a number")
   
study_end_en = 'Study session complete! Take a break.'
rest_end_en = 'Break time over! Get back to work.'

time_left = mintues * 60

def countdown(t):
    
    while t > 0:
        if t >= 600 and t % 300 == 0:
            print(t // 60)
        elif 60 <= t < 600 and t % 60 == 0:
            print(t // 60)
        elif 10 <= t < 60 and t % 5 == 0:
            print(t)
        elif t < 10:
            print(t)
        time.sleep(1)  
        t -= 1
    if mode == '1':
        print(study_end_en)
    else:
        print(rest_end_en)
    
def play_sound():
    system = platform.system()

    if system == "Windows":
        try:
            import winsound
            winsound.PlaySound("SystemHand", winsound.SND_ALIAS)
        except ImportError:
            print("winsound not available")
    elif system == "Linux" or system == "Darwin":  # Darwin = macOS
            # Requires 'sox' installed (for 'play' command)
        os.system('play -nq -t alsa synth 1 sine 440')
    else:
        print('\a')  # fallback: ASCII bell
countdown(time_left)
play_sound()

    


